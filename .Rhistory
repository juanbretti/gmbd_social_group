library(tidyverse)
library(igraph)
data_music <- read_csv('data/full_music_data.csv')
data_influence <- read_csv('data/influence_data.csv')
data_artist <- read_csv('data/data_by_artist.csv')
head(sort(table(data_music['artist_names']), decreasing =FALSE), 5)
data_music %>%
transform(artists_id = strsplit(str_trim(str_remove_all(artists_id, '[\\[\\]]'), side='both'), ",")) %>%
unnest(artists_id)
# dplyr::filter(grepl(',', artist_names))
a <- unique(data_artist['artist_id'])
b <- unique(data_influence['influencer_id'])
c <- unique(data_influence['follower_id'])
table(unlist(b) %in% unlist(a))
table(unlist(c) %in% unlist(a))
unknown_artist <- c[!(unlist(c) %in% unlist(a)),]
data_influence_edges <- data_influence %>%
rename(from=influencer_id, to=follower_id) %>%
relocate(from, to) %>%
filter(!(to %in% unknown_artist))
data_artist_vertices <- data_artist %>%
relocate(artist_id)
g <- graph_from_data_frame(d=data_influence_edges, vertices=data_artist_vertices, directed=TRUE)
# https://stackoverflow.com/questions/44892923/how-to-increase-length-of-edges-when-plotting-a-graph-in-r
# https://stackoverflow.com/questions/32012080/changing-the-spacing-between-vertices-in-igraph-in-r
# test.layout <- layout_(g, with_dh(weight.edge.lengths = edge_density(g)/1000))
# plot(g, layout = test.layout)
plot(g)
unique_a <- unique(data_artist['artist_id'])
unique_b <- unique(data_influence['influencer_id'])
unique_c <- unique(data_influence['follower_id'])
table(unlist(unique_b) %in% unlist(unique_a))
table(unlist(unique_c) %in% unlist(unique_a))
unknown_artist <- unique_c[!(unlist(unique_c) %in% unlist(unique_a)),]
library(tidyverse)
library(igraph)
data_music <- read_csv('data/full_music_data.csv')
data_influence <- read_csv('data/influence_data.csv')
data_artist <- read_csv('data/data_by_artist.csv')
head(sort(table(data_music['artist_names']), decreasing =FALSE), 5)
data_music %>%
transform(artists_id = strsplit(str_trim(str_remove_all(artists_id, '[\\[\\]]'), side='both'), ",")) %>%
unnest(artists_id)
# dplyr::filter(grepl(',', artist_names))
unique_a <- unique(data_artist['artist_id'])
unique_b <- unique(data_influence['influencer_id'])
unique_c <- unique(data_influence['follower_id'])
table(unlist(unique_b) %in% unlist(unique_a))
table(unlist(unique_c) %in% unlist(unique_a))
unknown_artist <- unique_c[!(unlist(unique_c) %in% unlist(unique_a)),]
data_influence_edges <- data_influence %>%
rename(from=influencer_id, to=follower_id) %>%
relocate(from, to) %>%
filter(!(to %in% unknown_artist))
data_artist_vertices <- data_artist %>%
relocate(artist_id)
g <- graph_from_data_frame(d=data_influence_edges, vertices=data_artist_vertices, directed=TRUE)
data_artist_vertices
g1 <- delete_vertices(g, V(g)$danceability >= 0.5)
g1 <- delete_vertices(g, V(g)$danceability >= 0.5)
plot(g1)
g1 <- delete_vertices(g, V(g)$danceability >= 0.8)
plot(g1)
g1 <- delete_vertices(g, V(g)$danceability >= 0.9)
plot(g1)
V(g)$danceability >= 0.9
# g1 <- delete_vertices(g, V(g)$danceability >= 0.9)
g1 <- induced_subgraph(graph, V(g)$danceability >= 0.9)
# g1 <- delete_vertices(g, V(g)$danceability >= 0.9)
g1 <- induced_subgraph(g, V(g)$danceability >= 0.9)
plot(g1)
# g1 <- delete_vertices(g, V(g)$danceability >= 0.9)
g1 <- induced_subgraph(g, V(g)$danceability >= 0.6)
plot(g1)
# g1 <- delete_vertices(g, V(g)$danceability >= 0.9)
g1 <- induced_subgraph(g, V(g)$danceability >= 0.7)
plot(g1)
# g1 <- delete_vertices(g, V(g)$danceability >= 0.9)
g1 <- induced_subgraph(g, V(g)$danceability >= 0.8)
plot(g1)
# g1 <- delete_vertices(g, V(g)$danceability >= 0.9)
g1 <- induced_subgraph(g, V(g)$danceability >= 0.9)
plot(g1)
# g1 <- delete_vertices(g, V(g)$danceability >= 0.9)
g1 <- induced_subgraph(g, V(g)$danceability >= 0.85)
plot(g1)
# g1 <- delete_vertices(g, V(g)$danceability >= 0.9)
g1 <- induced_subgraph(g, V(g)$danceability >= 0.85)
g1 <- induced_subgraph(g, V(g)$tempo >= 120)
plot(g1)
# g1 <- delete_vertices(g, V(g)$danceability >= 0.9)
g1 <- induced_subgraph(g, V(g)$danceability >= 0.85)
g1 <- induced_subgraph(g, V(g)$tempo >= 130)
plot(g1)
# g1 <- delete_vertices(g, V(g)$danceability >= 0.9)
g1 <- induced_subgraph(g, V(g)$danceability >= 0.85)
g1 <- induced_subgraph(g, V(g)$tempo >= 180)
plot(g1)
# g1 <- delete_vertices(g, V(g)$danceability >= 0.9)
g1 <- induced_subgraph(g, V(g)$danceability >= 0.85)
g1 <- induced_subgraph(g, V(g)$tempo >= 180)
g1 <- induced_subgraph(g, V(g)$from == 792507)
plot(g1)
V(g)$from == 792507
V(g)$from == 66915
V(g)$from
E(g)$from == 66915
E(g)$from
E(g)
E(g)
from(V(g))
E(g)
E(g)[from(V(g))]
E(g)[from(V(g))==66915]
from(V(g))==66915
E(g)[from(0)]
# g1 <- delete_vertices(g, V(g)$danceability >= 0.9)
g1 <- induced_subgraph(g, V(g)$danceability >= 0.85)
g1 <- induced_subgraph(g, V(g)$tempo >= 180)
g1 <- induced_subgraph(g, E(g)[from(66915)])
V(g)
V(g)$name
# g1 <- delete_vertices(g, V(g)$danceability >= 0.9)
g1 <- induced_subgraph(g, V(g)$danceability >= 0.85)
g1 <- induced_subgraph(g, V(g)$tempo >= 180)
idx <- match("66915", V(g)$name)
g1 <- induced_subgraph(g, E(g) [ from(idx) ])
idx
E(g)[from(idx)]
E(g)[from(idx)]
E(g)[from(idx)]
E(g)[from(idx)]
# g1 <- delete_vertices(g, V(g)$danceability >= 0.9)
g1 <- induced_subgraph(g, V(g)$danceability >= 0.85)
g1 <- induced_subgraph(g, V(g)$tempo >= 180)
idx <- match("66915", V(g)$name)
g1 <- E(g)[from(idx)]
plot(g1)
# g1 <- delete_vertices(g, V(g)$danceability >= 0.9)
g1 <- induced_subgraph(g, V(g)$danceability >= 0.85)
g1 <- induced_subgraph(g, V(g)$tempo >= 180)
idx <- match("66915", V(g)$name)
g1 <- induced_subgraph(g, vids=E(g)[from(idx)])
# g1 <- delete_vertices(g, V(g)$danceability >= 0.9)
g1 <- induced_subgraph(g, V(g)$danceability >= 0.85)
g1 <- induced_subgraph(g, V(g)$tempo >= 180)
idx <- match("66915", V(g)$name)
g1 <- induced_subgraph(g, vids=E(g)[from(idx)]$id)
plot(g1)
E(g)[from(idx)]$id
E(g)[from(idx)]
E(g)[from(idx)]$names
E(g)[from(idx)]$name
E(g)[from(idx)]
names(E(g)[from(idx)])
name(E(g)[from(idx)])
values(E(g)[from(idx)])
E(g)[from(idx)]
aa <- E(g)[from(idx)]
aa <- as.numeric(E(g)[from(idx)])
# g1 <- delete_vertices(g, V(g)$danceability >= 0.9)
g1 <- induced_subgraph(g, V(g)$danceability >= 0.85)
g1 <- induced_subgraph(g, V(g)$tempo >= 180)
idx <- match("66915", V(g)$name)
g1 <- induced_subgraph(g, vids=names(E(g)[from(idx)])
aa <- as.numeric(E(g)[from(idx)])
# g1 <- delete_vertices(g, V(g)$danceability >= 0.9)
g1 <- induced_subgraph(g, V(g)$danceability >= 0.85)
g1 <- induced_subgraph(g, V(g)$tempo >= 180)
idx <- match("66915", V(g)$name)
# g1 <- induced_subgraph(g, vids=names(E(g)[from(idx)])
aa <- as.numeric(E(g)[from(idx)])
g1 <- induced_subgraph(g, vids=aa)
# g1 <- delete_vertices(g, V(g)$danceability >= 0.9)
g1 <- induced_subgraph(g, V(g)$danceability >= 0.85)
g1 <- induced_subgraph(g, V(g)$tempo >= 180)
idx <- match("66915", V(g)$name)
# g1 <- induced_subgraph(g, vids=names(E(g)[from(idx)])
aa <- as.numeric(E(g)[from(idx)])
g1 <- induced_subgraph(g, aa)
aa
# g1 <- delete_vertices(g, V(g)$danceability >= 0.9)
g1 <- induced_subgraph(g, V(g)$danceability >= 0.85)
g1 <- induced_subgraph(g, V(g)$tempo >= 180)
idx <- match("66915", V(g)$name)
# g1 <- induced_subgraph(g, vids=names(E(g)[from(idx)])
aa <- as.numeric(E(g)[from(idx)])
g1 <- subgraph.edges(graph, aa, delete.vertices = TRUE)
# g1 <- delete_vertices(g, V(g)$danceability >= 0.9)
g1 <- induced_subgraph(g, V(g)$danceability >= 0.85)
g1 <- induced_subgraph(g, V(g)$tempo >= 180)
idx <- match("66915", V(g)$name)
# g1 <- induced_subgraph(g, vids=names(E(g)[from(idx)])
aa <- as.numeric(E(g)[from(idx)])
g1 <- subgraph.edges(g, aa, delete.vertices = TRUE)
plot(g1)
filter_idx <- match("317093", V(g)$name)
filter_edges <- as.numeric(E(g)[from(filter_idx)])
g1 <- subgraph.edges(g, filter_edges, delete.vertices = TRUE)
plot(g1)

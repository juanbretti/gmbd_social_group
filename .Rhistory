library(tidyverse)
library(igraph)
data_music <- read_csv('data/full_music_data.csv')
data_influence <- read_csv('data/influence_data.csv')
data_artist <- read_csv('data/data_by_artist.csv')
head(sort(table(data_music['artist_names']), decreasing =FALSE), 5)
data_music %>%
transform(artists_id = strsplit(str_trim(str_remove_all(artists_id, '[\\[\\]]'), side='both'), ",")) %>%
unnest(artists_id)
# dplyr::filter(grepl(',', artist_names))
a <- unique(data_artist['artist_id'])
b <- unique(data_influence['influencer_id'])
c <- unique(data_influence['follower_id'])
table(unlist(b) %in% unlist(a))
table(unlist(c) %in% unlist(a))
unknown_artist <- c[!(unlist(c) %in% unlist(a)),]
data_influence_edges <- data_influence %>%
rename(from=influencer_id, to=follower_id) %>%
relocate(from, to) %>%
filter(!(to %in% unknown_artist))
data_artist_vertices <- data_artist %>%
relocate(artist_id)
g <- graph_from_data_frame(d=data_influence_edges, vertices=data_artist_vertices, directed=TRUE)
# https://stackoverflow.com/questions/44892923/how-to-increase-length-of-edges-when-plotting-a-graph-in-r
# https://stackoverflow.com/questions/32012080/changing-the-spacing-between-vertices-in-igraph-in-r
# test.layout <- layout_(g, with_dh(weight.edge.lengths = edge_density(g)/1000))
# plot(g, layout = test.layout)
plot(g)
unique_a <- unique(data_artist['artist_id'])
unique_b <- unique(data_influence['influencer_id'])
unique_c <- unique(data_influence['follower_id'])
table(unlist(unique_b) %in% unlist(unique_a))
table(unlist(unique_c) %in% unlist(unique_a))
unknown_artist <- unique_c[!(unlist(unique_c) %in% unlist(unique_a)),]
